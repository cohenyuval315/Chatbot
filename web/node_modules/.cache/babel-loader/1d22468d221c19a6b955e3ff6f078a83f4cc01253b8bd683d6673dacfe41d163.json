{"ast":null,"code":"class APIClient {\n  constructor(base_url) {\n    this._instance = null;\n    if (APIClient._instance) {\n      return APIClient._instance;\n    }\n    APIClient.instance = this;\n    this.base_url = base_url;\n  }\n  async _request(method, endpoint, body = null) {\n    const url = `${this.base_url}${endpoint}`;\n    console.info(`${method} - ${url}`);\n    const requestOptions = {\n      method: method,\n      headers: {\n        // mode: 'no-cors',\n        'Content-Type': 'application/json'\n      }\n    };\n    if (body !== null) {\n      requestOptions.body = JSON.stringify(body);\n    }\n    try {\n      const response = await fetch(url, requestOptions);\n      const data = await response.json();\n      if (response.ok) {\n        if (response.statusCode !== 200) {} else {}\n        return data;\n      } else {\n        console.error(`Request failed with status ${response.status}: ${data.message}`);\n        throw new Error(data.message || 'An error occurred during the request.');\n      }\n    } catch (error) {\n      console.log(error);\n      console.error(error.message);\n      throw error;\n    }\n  }\n  async fetchChats() {\n    const endpoint = \"/c\";\n    const method = \"GET\";\n    const data = await this._request(method, endpoint);\n    return data;\n  }\n  async converse(chat, prompt) {\n    const chat_id = chat.id;\n    if (!chat_id) {\n      return await this.createNewChat(prompt);\n    } else {\n      return await this.updateChat(chat_id, prompt);\n    }\n  }\n  async createNewChat(prompt) {\n    const endpoint = \"/c\";\n    const method = \"POST\";\n    const body = {\n      \"prompt\": prompt\n    };\n    const data = await this._request(method, endpoint, body);\n    return data;\n  }\n  async updateChat(chat_id, prompt) {\n    const endpoint = `/c/${chat_id}`;\n    const method = \"PUT\";\n    const body = {\n      \"prompt\": prompt\n    };\n    const data = await this._request(method, endpoint, body);\n    return data;\n  }\n  async getChat(chat_id) {\n    const endpoint = `/c/${chat_id}`;\n    const method = \"GET\";\n    const data = await this._request(method, endpoint);\n    return data;\n  }\n  async deleteChat(chat_id) {\n    const endpoint = `/c/${chat_id}`;\n    const method = \"DELETE\";\n    const data = await this._request(method, endpoint);\n    return data;\n  }\n}\nconst client = function () {\n  let host = \"http://localhost\";\n  let port = 3001;\n  let base_url = `${host}:${port}`;\n  if (!process.env.NODE_ENV || process.env.NODE_ENV === 'development') {\n    // proxy\n    // base_url = \"\"\n  } else {}\n  const api_client = new APIClient(base_url);\n  return api_client;\n}();\nexport default client;","map":{"version":3,"names":["APIClient","constructor","base_url","_instance","instance","_request","method","endpoint","body","url","console","info","requestOptions","headers","JSON","stringify","response","fetch","data","json","ok","statusCode","error","status","message","Error","log","fetchChats","converse","chat","prompt","chat_id","id","createNewChat","updateChat","getChat","deleteChat","client","host","port","process","env","NODE_ENV","api_client"],"sources":["/home/yuval/Desktop/chatbot_app/Chatbot/web/src/API/APIClient.jsx"],"sourcesContent":["\nclass APIClient {\n    _instance = null; \n    constructor(base_url) {  \n      if(APIClient._instance){\n        return APIClient._instance;\n      }\n      APIClient.instance = this;\n      this.base_url = base_url\n    }\n    \n    async _request(method,endpoint, body = null) {\n      const url = `${this.base_url}${endpoint}`;\n      console.info(`${method} - ${url}`);\n      const requestOptions = {\n        method: method,\n        headers: {\n          // mode: 'no-cors',\n          'Content-Type': 'application/json',\n        },\n      };\n      if (body !== null) {\n        requestOptions.body = JSON.stringify(body);\n      }\n    \n      try {\n        const response = await fetch(url, requestOptions);\n        const data = await response.json();\n        if (response.ok) {\n          if (response.statusCode !== 200){\n            \n          }else{\n            \n          }\n          return data; \n        } else {\n          console.error(`Request failed with status ${response.status}: ${data.message}`);\n          throw new Error(data.message || 'An error occurred during the request.');\n        }\n      } catch (error) {\n        console.log(error)\n        console.error(error.message);\n        throw error;\n      }\n    }\n\n    async fetchChats() {\n      const endpoint = \"/c\"\n      const method = \"GET\"\n      const data = await this._request(method,endpoint)\n      return data;\n    }\n\n    async converse(chat,prompt){\n      const chat_id = chat.id\n      if (!chat_id){\n        return await this.createNewChat(prompt)\n      }else{\n        return await this.updateChat(chat_id,prompt)\n      }\n    }\n\n    async createNewChat(prompt){\n      const endpoint = \"/c\"\n      const method = \"POST\"\n      const body = {\n        \"prompt\":prompt\n      }\n      const data = await this._request(method,endpoint,body)\n      return data;\n    }\n\n    async updateChat(chat_id,prompt){\n      const endpoint = `/c/${chat_id}`\n      const method = \"PUT\"\n      const body = {\n        \"prompt\":prompt\n      }\n      const data = await this._request(method,endpoint,body);\n      return data;\n    }\n\n    async getChat(chat_id){\n      const endpoint = `/c/${chat_id}`\n      const method = \"GET\"\n      const data = await this._request(method,endpoint);\n      return data;\n    }\n\n    async deleteChat(chat_id){\n      const endpoint = `/c/${chat_id}`\n      const method = \"DELETE\"\n      const data = await this._request(method,endpoint);\n      return data;\n    }\n\n\n}\n\nconst client = (function() {\n  let host = \"http://localhost\"\n  let port = 3001\n  let base_url = `${host}:${port}`;\n  if (!process.env.NODE_ENV || process.env.NODE_ENV === 'development') {\n    // proxy\n    // base_url = \"\"\n  } else {\n    \n  }\n  \n  \n  const api_client = new APIClient(base_url);\n  return api_client;\n})();\n\n\nexport default client;"],"mappings":"AACA,MAAMA,SAAS,CAAC;EAEZC,WAAWA,CAACC,QAAQ,EAAE;IAAA,KADtBC,SAAS,GAAG,IAAI;IAEd,IAAGH,SAAS,CAACG,SAAS,EAAC;MACrB,OAAOH,SAAS,CAACG,SAAS;IAC5B;IACAH,SAAS,CAACI,QAAQ,GAAG,IAAI;IACzB,IAAI,CAACF,QAAQ,GAAGA,QAAQ;EAC1B;EAEA,MAAMG,QAAQA,CAACC,MAAM,EAACC,QAAQ,EAAEC,IAAI,GAAG,IAAI,EAAE;IAC3C,MAAMC,GAAG,GAAI,GAAE,IAAI,CAACP,QAAS,GAAEK,QAAS,EAAC;IACzCG,OAAO,CAACC,IAAI,CAAE,GAAEL,MAAO,MAAKG,GAAI,EAAC,CAAC;IAClC,MAAMG,cAAc,GAAG;MACrBN,MAAM,EAAEA,MAAM;MACdO,OAAO,EAAE;QACP;QACA,cAAc,EAAE;MAClB;IACF,CAAC;IACD,IAAIL,IAAI,KAAK,IAAI,EAAE;MACjBI,cAAc,CAACJ,IAAI,GAAGM,IAAI,CAACC,SAAS,CAACP,IAAI,CAAC;IAC5C;IAEA,IAAI;MACF,MAAMQ,QAAQ,GAAG,MAAMC,KAAK,CAACR,GAAG,EAAEG,cAAc,CAAC;MACjD,MAAMM,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAI,CAAC,CAAC;MAClC,IAAIH,QAAQ,CAACI,EAAE,EAAE;QACf,IAAIJ,QAAQ,CAACK,UAAU,KAAK,GAAG,EAAC,CAEhC,CAAC,MAAI,CAEL;QACA,OAAOH,IAAI;MACb,CAAC,MAAM;QACLR,OAAO,CAACY,KAAK,CAAE,8BAA6BN,QAAQ,CAACO,MAAO,KAAIL,IAAI,CAACM,OAAQ,EAAC,CAAC;QAC/E,MAAM,IAAIC,KAAK,CAACP,IAAI,CAACM,OAAO,IAAI,uCAAuC,CAAC;MAC1E;IACF,CAAC,CAAC,OAAOF,KAAK,EAAE;MACdZ,OAAO,CAACgB,GAAG,CAACJ,KAAK,CAAC;MAClBZ,OAAO,CAACY,KAAK,CAACA,KAAK,CAACE,OAAO,CAAC;MAC5B,MAAMF,KAAK;IACb;EACF;EAEA,MAAMK,UAAUA,CAAA,EAAG;IACjB,MAAMpB,QAAQ,GAAG,IAAI;IACrB,MAAMD,MAAM,GAAG,KAAK;IACpB,MAAMY,IAAI,GAAG,MAAM,IAAI,CAACb,QAAQ,CAACC,MAAM,EAACC,QAAQ,CAAC;IACjD,OAAOW,IAAI;EACb;EAEA,MAAMU,QAAQA,CAACC,IAAI,EAACC,MAAM,EAAC;IACzB,MAAMC,OAAO,GAAGF,IAAI,CAACG,EAAE;IACvB,IAAI,CAACD,OAAO,EAAC;MACX,OAAO,MAAM,IAAI,CAACE,aAAa,CAACH,MAAM,CAAC;IACzC,CAAC,MAAI;MACH,OAAO,MAAM,IAAI,CAACI,UAAU,CAACH,OAAO,EAACD,MAAM,CAAC;IAC9C;EACF;EAEA,MAAMG,aAAaA,CAACH,MAAM,EAAC;IACzB,MAAMvB,QAAQ,GAAG,IAAI;IACrB,MAAMD,MAAM,GAAG,MAAM;IACrB,MAAME,IAAI,GAAG;MACX,QAAQ,EAACsB;IACX,CAAC;IACD,MAAMZ,IAAI,GAAG,MAAM,IAAI,CAACb,QAAQ,CAACC,MAAM,EAACC,QAAQ,EAACC,IAAI,CAAC;IACtD,OAAOU,IAAI;EACb;EAEA,MAAMgB,UAAUA,CAACH,OAAO,EAACD,MAAM,EAAC;IAC9B,MAAMvB,QAAQ,GAAI,MAAKwB,OAAQ,EAAC;IAChC,MAAMzB,MAAM,GAAG,KAAK;IACpB,MAAME,IAAI,GAAG;MACX,QAAQ,EAACsB;IACX,CAAC;IACD,MAAMZ,IAAI,GAAG,MAAM,IAAI,CAACb,QAAQ,CAACC,MAAM,EAACC,QAAQ,EAACC,IAAI,CAAC;IACtD,OAAOU,IAAI;EACb;EAEA,MAAMiB,OAAOA,CAACJ,OAAO,EAAC;IACpB,MAAMxB,QAAQ,GAAI,MAAKwB,OAAQ,EAAC;IAChC,MAAMzB,MAAM,GAAG,KAAK;IACpB,MAAMY,IAAI,GAAG,MAAM,IAAI,CAACb,QAAQ,CAACC,MAAM,EAACC,QAAQ,CAAC;IACjD,OAAOW,IAAI;EACb;EAEA,MAAMkB,UAAUA,CAACL,OAAO,EAAC;IACvB,MAAMxB,QAAQ,GAAI,MAAKwB,OAAQ,EAAC;IAChC,MAAMzB,MAAM,GAAG,QAAQ;IACvB,MAAMY,IAAI,GAAG,MAAM,IAAI,CAACb,QAAQ,CAACC,MAAM,EAACC,QAAQ,CAAC;IACjD,OAAOW,IAAI;EACb;AAGJ;AAEA,MAAMmB,MAAM,GAAI,YAAW;EACzB,IAAIC,IAAI,GAAG,kBAAkB;EAC7B,IAAIC,IAAI,GAAG,IAAI;EACf,IAAIrC,QAAQ,GAAI,GAAEoC,IAAK,IAAGC,IAAK,EAAC;EAChC,IAAI,CAACC,OAAO,CAACC,GAAG,CAACC,QAAQ,IAAIF,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,aAAa,EAAE;IACnE;IACA;EAAA,CACD,MAAM,CAEP;EAGA,MAAMC,UAAU,GAAG,IAAI3C,SAAS,CAACE,QAAQ,CAAC;EAC1C,OAAOyC,UAAU;AACnB,CAAC,CAAE,CAAC;AAGJ,eAAeN,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}